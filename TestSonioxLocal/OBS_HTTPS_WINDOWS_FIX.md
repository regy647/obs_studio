# =============================
# FIXING OBS STUDIO NOT SHOWING HTTPS LOCALHOST PAGE ON WINDOWS
# =============================

# üß© ISSUE SUMMARY:
# On Windows, OBS Studio uses an internal Chromium engine (CEF) for "Browser Source".
# This internal browser does NOT trust self-signed HTTPS certificates by default.
# Result: The localhost page works over HTTP but not HTTPS (blank/failed to load).
# On macOS, local certs are automatically trusted ‚Äî hence it works there.

# üß∞ GOAL:
# Make OBS on Windows trust your local HTTPS certificate or safely bypass it for development.

# ---------------------------------------------------------------
# STEP 1: Confirm the error using OBS browser debug mode
# ---------------------------------------------------------------

# 1Ô∏è‚É£ Close OBS completely.
# 2Ô∏è‚É£ Open Command Prompt (Win + R, type `cmd`, press Enter).
# 3Ô∏è‚É£ Run the following command exactly:

"C:\Program Files\obs-studio\bin\64bit\obs64.exe" --verbose --browser-debug

# 4Ô∏è‚É£ When your Browser Source loads (or fails to), a browser console or new window should open.
#     - Look for errors like:
#           ERR_CERT_AUTHORITY_INVALID
#           ERR_CERT_COMMON_NAME_INVALID
#           NET::ERR_CERT_DATE_INVALID
#     - These confirm it's a certificate trust problem.

# ---------------------------------------------------------------
# STEP 2: Locate the HTTPS certificate used by your local server
# ---------------------------------------------------------------

# Depending on your dev setup, the certificate may be generated by:
#   - mkcert (common for localhost)
#   - a self-signed OpenSSL cert (manual)
#   - a tool like webpack-dev-server, vite, or node dev server

# Examples of where to look:
#   ./cert.pem
#   ./localhost.crt
#   ./ssl/server.crt
#   (check your project's config for paths to key/cert files)

# ---------------------------------------------------------------
# STEP 3: Add the certificate to Windows trusted root store
# ---------------------------------------------------------------

# 1Ô∏è‚É£ Double-click your certificate file (e.g., localhost.crt or .pem).
# 2Ô∏è‚É£ Click "Install Certificate‚Ä¶".
# 3Ô∏è‚É£ Choose:
#       ‚Üí "Local Machine"
#       ‚Üí "Place all certificates in the following store"
#       ‚Üí Browse ‚Üí select "Trusted Root Certification Authorities"
# 4Ô∏è‚É£ Click "Finish" and confirm any prompts.
# 5Ô∏è‚É£ Restart OBS.

# If done correctly, OBS will now trust your HTTPS localhost page.
# You can re-run OBS normally (without debug flags) to verify.

# ---------------------------------------------------------------
# STEP 4 (OPTIONAL, QUICK TEST): Ignore certificate errors
# ---------------------------------------------------------------

# This is ONLY for local testing.
# It bypasses HTTPS trust checks entirely.

# Run OBS with this flag:
"C:\Program Files\obs-studio\bin\64bit\obs64.exe" --ignore-certificate-errors

# If your page now loads, it confirms the issue is indeed SSL trust related.
# Don't rely on this long-term ‚Äî fix the cert properly instead.

# ---------------------------------------------------------------
# STEP 5 (IF USING MKCERT): Ensure mkcert CA is trusted
# ---------------------------------------------------------------

# If you used mkcert to create the certificate, you can install its CA easily:

# 1Ô∏è‚É£ Download mkcert for Windows:
#     https://github.com/FiloSottile/mkcert/releases
#
# 2Ô∏è‚É£ Open Command Prompt where mkcert.exe is located, then run:
mkcert -install

# This installs mkcert's root CA into the Windows trust store automatically.
# Then regenerate your local certificate if needed:
mkcert localhost 127.0.0.1

# 3Ô∏è‚É£ Update your dev server to use the newly generated files (localhost.pem / localhost-key.pem).
# 4Ô∏è‚É£ Restart OBS and reload your browser source.

# ---------------------------------------------------------------
# STEP 6: (OPTIONAL BUT RECOMMENDED)
# PERMANENTLY ADD THE FIX TO OBS STARTUP SHORTCUT
# ---------------------------------------------------------------

# ‚öôÔ∏è If you want OBS to always ignore HTTPS errors (for dev environments only):

# 1Ô∏è‚É£ Locate your OBS shortcut:
#     - Usually on Desktop or Start Menu.
#     - Right-click ‚Üí "Properties".
#
# 2Ô∏è‚É£ In the "Target" field, you'll see something like:
#       "C:\Program Files\obs-studio\bin\64bit\obs64.exe"
#
# 3Ô∏è‚É£ Add the flag *after* the path, with a space:
#       "C:\Program Files\obs-studio\bin\64bit\obs64.exe" --allow-insecure-localhost
#
# 4Ô∏è‚É£ (Alternative if you prefer to skip cert warnings completely)
#       "C:\Program Files\obs-studio\bin\64bit\obs64.exe" --ignore-certificate-errors
#
# 5Ô∏è‚É£ Click "Apply" and "OK".
#
# 6Ô∏è‚É£ From now on, OBS will automatically launch with the flag and load HTTPS localhost pages.

# ‚úÖ Recommended flag for local dev testing:
#       --allow-insecure-localhost
# This only disables certificate checks for https://localhost and nothing else.

# ---------------------------------------------------------------
# ‚úÖ END RESULT:
# - HTTPS localhost pages now load in OBS Browser Source on Windows.
# - No need to re-run command lines each time.
# - Styles and scripts that require HTTPS contexts work correctly.
# ---------------------------------------------------------------
